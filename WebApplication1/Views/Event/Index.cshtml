
@using SalesForceIntegration.Models

@{
    ViewBag.Title = "Events";
}
@Scripts.Render("~/bundles/jquery")
<header>
   
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" type="text/css" />
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" type="text/javascript"></script>
</header>
<h2>Events from SalesForce</h2>
<div class="EventsDiv">

    <table class="eventdatatable"><thead>
                                      <tr>
                                          <th>Subject</th>
                                          <th>Start Time</th>
                                          <th>End Time</th>
                                          <th>Location</th>
                                          <th>Description</th>
                                      </tr>
</thead></table>
</div>

<script>
    $(document).ready(function () {

        $.ajax({
            url: '/Event/GetEvents',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
              
                assignToEventsColumns(data);
            }
        });

        function assignToEventsColumns(data) {
            $('.eventdatatable').DataTable({
                "aaData": data,
                //"aaSorting": [],
                columns: [
                    { "data": "Subject" },
                    { "data": "StartDate", "Type": 'date'},
                    { "data": "EndDate", "Type": 'date' },
                    { "data": "Location"},
                    { "data": "Description" }
                ]
            });
        }
        });
  

</script>